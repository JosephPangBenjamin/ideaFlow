---
stepsCompleted: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14]
inputDocuments:
  - planning-artifacts/product-brief-ideaFlow-2025-12-28.md
  - planning-artifacts/prd.md
  - stitch_/用户注册/登录_-_详细视图/screen.png
  - stitch_/仪表盘/任务概览/screen.png
  - stitch_/今天任务列表/screen.png
  - stitch_/即将到来任务列表/screen.png
  - stitch_/个人任务列表/screen.png
  - stitch_/项目任务列表/screen.png
  - stitch_/自由画布任务编辑/screen.png
  - stitch_/任务详情侧边栏/screen.png
  - stitch_/控件面板视图/screen.png
  - stitch_/团队协作/分享设置_1/screen.png
  - stitch_/团队协作/分享设置_2/screen.png
  - stitch_/团队协作/分享设置_3/screen.png
  - stitch_/团队协作/分享设置_4/screen.png
  - stitch_/团队协作/分享设置_5/screen.png
  - stitch_/新建任务详情视图/screen.png
  - stitch_/设置中心/screen.png
  - stitch_/设置中心_-_详细视图/screen.png
---

# UX Design Specification - IdeaFlow

**Author:** Offer
**Date:** 2025-12-30

---

## Executive Summary

### Project Vision

**IdeaFlow** 是一款将**想法捕捉**与**任务执行**无缝融合的效率工具，解决现代知识工作者普遍面临的**想法碎片化**问题。

**核心价值主张**：
> 「不只是更好的记录工具，而是推动点子落地执行的助手」

**产品定位**：通过可视化自由画布、上下文保留和AI智能分析，让每一个想法都能被追踪、演进和执行，帮助用户从"碎片化记录者"转变为"有条不紊的执行者"。

### Target Users

| 用户画像 | 核心特征 | 痛点 | 期望 |
|---------|---------|------|------|
| **小明** - 大学生创业者 | 点子多但执行少 | 想法太多无法聚焦，缺乏推动力和追踪机制 | 工具帮助从"想"到"做" |
| **小红** - 职场产品经理 | 想法碎片化，需协作 | 想法散乱无法形成体系，协作时无法快速传递上下文 | 整理好的想法直接变成可分配任务 |
| **小王** - 设计师协作者 | 被@加入协作 | 需要快速理解完整上下文 | 从被动接收变为主动共创 |

**用户技术水平**：中等，熟悉常见效率工具
**主要设备**：Desktop 优先，Tablet 次之，Mobile 只读浏览

### Key Design Challenges

1. **自由画布性能与可用性**：如何在60fps流畅体验的同时提供直观的交互，支持≤100节点
2. **快速捕捉 vs 上下文丰富**：平衡"闪念记录"的速度与"上下文保留"的深度
3. **私密到公开的转换**：实现"私密时自由，公开时体面"的双视图设计
4. **沉底提醒的时机**：让AI提醒感觉"贴心"而非"打扰"（7天+未操作触发）
5. **想法→任务转化流程**：一键转化的同时保留上下文关联

### Design Opportunities

1. **记忆恢复卡片**：「创建时静默，回顾时惊艳」- 突出展示时间+来源上下文
2. **空间隐喻组织**：利用画布分区帮助用户组织想法（如"创意区"、"执行区"）
3. **渐进式协作体验**：从"分享链接"到"@分配任务"的平滑过渡
4. **双重进度可视化**：时间线（什么时候做什么）+ 状态（做到哪了）
5. **Aha!时刻设计**：AI告知沉底点子、智能推荐优先级、干净分享视图

---

## Core User Experience

### Defining Experience

**核心用户行为**：
- **最频繁操作**：快速创建想法（闪念捕捉）
- **最关键操作**：想法 → 任务转化
- **必须无阻力**：3秒内完成想法记录

**核心循环**：
```
捕捉想法 → 画布组织 → 转化任务 → 追踪进度 → 完成执行
```

### Platform Strategy

| 维度 | 决策 |
|------|------|
| **平台** | Web SPA（优先） |
| **交互方式** | 鼠标/键盘为主，触控友好 |
| **响应式** | Desktop 完整功能，Tablet 核心功能，Mobile 只读 |
| **离线** | MVP 暂不支持，V2.0 考虑 PWA |
| **浏览器** | Chrome/Safari/Firefox 最新-2版本 |

### Effortless Interactions

| 交互 | 体验目标 |
|------|---------|
| **闪念捕捉** | 打开即写，自动保存，上下文静默采集 |
| **画布操作** | 60fps 拖拽/缩放/平移，≤100ms 响应 |
| **想法→任务** | 一键转化，保留完整上下文关联 |
| **状态切换** | 点击/拖拽即可更改任务状态 |

### Critical Success Moments

| 时刻 | 描述 | 用户感受 |
|------|------|---------|
| **Aha! #1** | 用户打开7天前的想法，看到完整上下文 | "我想起来为什么记这个了！" |
| **Aha! #2** | 一键转化想法为任务 | "原来这么简单就能开始执行" |
| **Aha! #3** | 分享给同事，对方秒懂 | "再也不用解释半小时了" |
| **首次成功** | 完成第一个从想法转化的任务 | "我真的把想法落地了" |

### Experience Principles

| 原则 | 描述 |
|------|------|
| ⚡ **速度优先** | 任何捕捉操作 ≤3秒完成 |
| 🧠 **上下文静默** | 创建时不打扰，回顾时惊艳 |
| 🎨 **空间自由** | 画布无边界，思维无边界 |
| 📊 **进度可视** | 双轨追踪：时间线 + 状态 |
| 🔒 **私密体面** | 私密时自由，公开时干净 |

---

## Desired Emotional Response

### Primary Emotional Goals

| 情感 | 描述 |
|------|------|
| 🎯 **掌控感** | 用户感觉自己的想法井井有条，不再失控 |
| 💡 **恍然大悟** | 回顾时发现上下文完整保留的惊喜感 |
| ⚡ **高效感** | 从想法到执行的流畅，没有阻碍 |
| 🏆 **成就感** | 完成任务时的满足，"我真的做到了" |
| 🧘 **安心感** | 知道想法被妥善保存，不会遗忘 |

### Emotional Journey Mapping

| 阶段 | 期望情感 | 设计策略 |
|------|---------|---------|
| **首次发现** | 好奇 + 清晰 | 简洁的价值主张，30秒理解核心功能 |
| **注册登录** | 轻松 + 安全 | 手机号一键登录，无繁琐步骤 |
| **闪念捕捉** | 畅快 + 放心 | 打开即写，自动保存，无焦虑 |
| **画布组织** | 自由 + 创意 | 无边界空间，自由拖拽，思维可视化 |
| **想法转任务** | 惊喜 + 动力 | 一键转化，"原来这么简单" |
| **进度追踪** | 清晰 + 成就 | 可视化进度，每个完成都有反馈 |
| **回顾旧想法** | 恍然大悟 | "记忆恢复卡片"重现当时上下文 |
| **分享协作** | 自信 + 专业 | 干净的公开视图，对方秒懂 |
| **出错时** | 被保护 | 自动保存，友好提示，数据不丢失 |

### Micro-Emotions

**需要强化的情感：**
- ✅ **自信** vs 困惑 → 清晰的视觉层级和操作反馈
- ✅ **信任** vs 怀疑 → 自动保存指示、数据安全感知
- ✅ **成就** vs 沮丧 → 完成任务的庆祝动效
- ✅ **惊喜** vs 无感 → 记忆恢复卡片的"Aha!"时刻

**需要避免的情感：**
- ❌ **焦虑** → 担心想法丢失、操作不可逆
- ❌ **困惑** → 不知道下一步该做什么
- ❌ **挫败** → 功能复杂、学习成本高
- ❌ **尴尬** → 分享给他人时内容杂乱

### Design Implications

| 情感目标 | UX 设计策略 |
|---------|------------|
| **掌控感** | 拖拽排序、批量操作、筛选视图 |
| **恍然大悟** | 记忆恢复卡片突出展示时间+来源 |
| **高效感** | ≤3秒捕捉、一键转化、键盘快捷键 |
| **成就感** | 完成动效、进度可视化、统计仪表盘 |
| **安心感** | "已保存"状态提示、离线缓存、版本历史 |

### Emotional Design Principles

| 原则 | 描述 |
|------|------|
| 🌟 **惊喜而非打扰** | AI提醒应感觉"贴心"而非"烦人" |
| 🔒 **安全而非焦虑** | 所有操作可撤销，数据自动保存 |
| 🎯 **引导而非强制** | 推荐下一步，但不强迫用户行动 |
| 🎉 **庆祝而非沉默** | 完成任务时有正向反馈 |
| 🧹 **整洁而非杂乱** | 公开视图永远干净专业 |

---

## UX Pattern Analysis & Inspiration

### Inspiring Products Analysis

| 产品 | 擅长之处 | 可借鉴的 UX 模式 |
|------|---------|-----------------|
| **Notion** | 灵活的块编辑 + 数据库视图 | 块组件拖拽、多视图切换（表格/看板/时间线） |
| **滴答清单** | 极速任务创建 + 智能日期解析 | 自然语言输入、一键添加任务 |
| **FigJam/Miro** | 自由画布 + 实时协作 | 无限画布、便签贴、连线批注 |
| **蓝湖** | 设计稿预览 + 标注查看 | 缩放平移体验、测量标注线 |
| **飞书文档** | 评论 + @协作 | 行内评论、@提及通知 |

### Transferable UX Patterns

**导航模式：**
| 模式 | 来源 | 适用场景 |
|------|------|---------|
| **侧边栏 + 画布主区** | FigJam | 画布编辑主界面 |
| **顶部标签页切换** | 滴答清单 | 今天/即将到来/个人任务 |
| **快速搜索弹窗** | Notion (⌘+K) | 全局搜索想法和任务 |

**交互模式：**
| 模式 | 来源 | 适用场景 |
|------|------|---------|
| **双击即编辑** | Notion | 想法卡片内容编辑 |
| **拖拽排序** | 滴答清单 | 任务列表、画布节点 |
| **右键上下文菜单** | FigJam | 节点操作（转任务、连线、删除） |
| **键盘快捷键** | Notion | 高级用户效率操作 |

**视觉模式：**
| 模式 | 来源 | 适用场景 |
|------|------|---------|
| **卡片式布局** | Notion | 想法列表、任务看板 |
| **状态颜色编码** | 滴答清单 | 任务优先级和状态 |
| **微动效反馈** | 飞书 | 完成任务的庆祝动画 |
| **空态引导** | Notion | 首次使用引导 |

### Anti-Patterns to Avoid

| 反模式 | 问题 | IdeaFlow 策略 |
|-------|------|--------------|
| **功能过载** (Notion) | 学习曲线陡峭 | 渐进式披露，MVP 专注核心 |
| **强制分类** (传统 Todo) | 创建前必须选分类 | 默认无分类，后续可补充 |
| **无上下文保存** | 只存内容，不存原因 | 自动采集时间+可选来源 |
| **死板列表视图** | 无法自由组织 | 自由画布 + 分区 |
| **实时协作复杂性** | 同步冲突 | MVP 用刷新同步简化 |

### Design Inspiration Strategy

**采用（直接使用）：**
- ✅ **无限画布 + 缩放平移** ← FigJam/Miro（核心差异化）
- ✅ **拖拽排序 + 状态颜色** ← 滴答清单（任务管理）
- ✅ **⌘+K 快速搜索** ← Notion（效率提升）

**适配（修改使用）：**
- 🔄 **块组件** ← Notion → 简化为：想法卡片 + 任务卡片 + 连线
- 🔄 **行内评论** ← 飞书 → 简化为：拉线批注（Phase 1）
- 🔄 **多视图切换** ← Notion → 简化为：列表视图 + 画布视图

**避免：**
- ❌ 复杂的权限管理（MVP 简化）
- ❌ 实时协作的同步复杂性（用刷新同步代替）
- ❌ 过多自定义选项（保持简洁）

---

## Design System Foundation

### Design System Choice

**核心 UI 组件库**：Arco Design（或 Semi Design）
**画布渲染引擎**：Konva.js

基于 Web SPA 平台、效率工具定位和中文优先的需求，选择现代化的组件库配合独立的画布解决方案。

### Rationale for Selection

| 选择因素 | Arco Design 优势 |
|---------|----------------|
| **视觉风格** | 现代清爽，适合创意效率工具 |
| **中文支持** | 字节跳动出品，文档友好 |
| **组件丰富** | 表单、导航、弹窗开箱即用 |
| **主题定制** | 支持品牌色、暗黑模式 |
| **框架适配** | 支持 Vue 3 / React |

| 选择因素 | Konva.js 优势 |
|---------|-------------|
| **性能** | Canvas 渲染，支持大量节点 |
| **交互** | 内置拖拽、缩放、事件系统 |
| **灵活性** | 与 UI 框架解耦，独立管理画布 |
| **社区** | 成熟稳定，文档完善 |

### Implementation Approach

| 层级 | 技术选择 | 用途 |
|------|---------|------|
| **基础组件** | Arco Design | 按钮、表单、弹窗、侧边栏、导航 |
| **画布引擎** | Konva.js | 无限画布、节点拖拽、连线绘制 |
| **图标库** | Arco Icons + 自定义 | 统一图标风格 |
| **动效库** | Framer Motion / CSS Transitions | 微交互、完成庆祝动效 |
| **状态管理** | Pinia / Zustand | 全局状态、画布数据 |

### Customization Strategy

**主题定制：**
- **品牌主色**：蓝紫色系（体现创意 + 效率）
- **圆角风格**：偏圆润（8px-12px），体现友好感
- **字体**：系统字体优先（性能），标题可用品牌字体
- **暗黑模式**：Phase 2 支持

**组件定制：**
- 想法卡片组件（自定义）
- 任务卡片组件（自定义）
- 画布节点组件（基于 Konva）
- 连线标注组件（基于 Konva）
- 记忆恢复卡片组件（自定义）

**设计 Token：**
```
--color-primary: #6366F1 (靛蓝)
--color-success: #10B981 (完成绿)
--color-warning: #F59E0B (提醒黄)
--color-danger: #EF4444 (删除红)
--radius-sm: 6px
--radius-md: 10px
--radius-lg: 16px
--shadow-card: 0 2px 8px rgba(0,0,0,0.08)
```

---

## Defining Core Experience

### Defining Experience Statement

> **"3秒闪念，一键落地"**

用户向朋友描述时会说：
> "我用 IdeaFlow 随手记想法，过几天它会提醒我，我一点就变成任务开始执行了。"

这是 IdeaFlow 的核心竞争力：不只是记录工具，而是推动点子落地执行的助手。

### User Mental Model

**当前解决方案的问题：**

| 工具 | 用户行为 | 痛点 |
|------|---------|------|
| 微信收藏 | 发给自己 | 沉底，找不到，没上下文 |
| 备忘录 | 快速记录 | 杂乱，不能组织，无法执行 |
| Todo 类 | 创建任务 | 没有"想法"阶段，直接要求执行 |
| Notion | 结构化记录 | 太重，创建门槛高 |

**IdeaFlow 的心智模型：**
```
想法 ≠ 任务
想法是种子 → 需要培育 → 成熟时转为任务 → 执行完成
```

### Success Criteria

| 维度 | 标准 |
|------|------|
| **速度** | 从打开到完成记录 ≤3秒 |
| **无阻力** | 无需选分类、设时间，直接记 |
| **有上下文** | 自动保存时间，可选来源 |
| **易触达** | 全局快捷键、首页入口显眼 |
| **有反馈** | "已保存"提示，不担心丢失 |

**用户成功时刻：**
- ✅ "我刚想到就记下来了，没打断我的思路"
- ✅ "两周后打开，我还记得当时为什么记这个"
- ✅ "点一下就变成任务，今天就开始做"

### Novel UX Patterns

| 交互 | 类型 | 借鉴/创新点 |
|------|------|------------|
| **闪念捕捉** | 已有模式 | 类滴答清单速记 |
| **画布组织** | 创新组合 | 类蓝湖 + FigJam 的缩放拖拽 |
| **拉线标注** | 轻度创新 | 类批注，但在画布上 |
| **想法→任务** | 核心创新 | 独有转化概念 + 上下文保留 |
| **记忆恢复卡片** | 核心创新 | 独有的"回顾时惊艳"设计 |

### Experience Mechanics

**闪念捕捉流程：**

| 阶段 | 用户行为 | 系统响应 |
|------|---------|--------|
| **启动** | 点击"+" / 按快捷键 | 弹出极简输入框 |
| **输入** | 打字记录想法 | 自动记录时间戳 |
| **可选扩展** | 点击展开 | 可填来源/原因（非必填） |
| **完成** | 按回车 / 失焦 | "已保存 ✓"提示，想法出现在列表/画布 |

**想法→任务转化流程：**

| 阶段 | 用户行为 | 系统响应 |
|------|---------|--------|
| **触发** | 点击想法卡片"转任务"按钮 | 弹出简洁转化面板 |
| **设置** | 可选：截止日期、分类 | 默认无分类、无日期 |
| **确认** | 点击"创建任务" | 想法变为任务，保留关联 |
| **反馈** | - | "任务已创建 🎉"提示 |

**画布操作流程：**

| 阶段 | 用户行为 | 系统响应 |
|------|---------|--------|
| **缩放** | 滚轮 / 双指捧合 | 60fps 平滑缩放 |
| **平移** | 拖拽空白区域 | 60fps 平滑移动 |
| **拖拽节点** | 拖拽卡片 | 卡片跟随手势，连线自动更新 |
| **连线** | 从节点边缘拖出 | 绘制连线，可添加标注文字 |

---

## Visual Design Foundation

### Color System

基于 UI 设计图分析提取的配色系统：

**主色调：**
| 色彩角色 | 色值 | 用途 |
|---------|------|------|
| **Primary** | `#3B82F6` 蓝色 | 主要按钮、选中状态、品牌强调 |
| **Primary Light** | `#60A5FA` | 悬停状态、浅色背景 |
| **Primary Dark** | `#2563EB` | 点击状态 |
| **Secondary** | `#8B5CF6` 紫色 | 想法卡片强调 |

**状态色：**
| 色彩角色 | 色值 | 用途 |
|---------|------|------|
| **Success** | `#10B981` 绿色 | 完成状态、成功提示 |
| **Warning** | `#F59E0B` 橙黄 | 提醒、即将到期 |
| **Danger** | `#EF4444` 红色 | 删除、错误 |
| **Info** | `#3B82F6` 蓝色 | 信息提示 |

**背景色：**
| 层级 | 色值 | 用途 |
|------|------|------|
| **Background** | `#F9FAFB` | 页面背景 |
| **Card** | `#FFFFFF` | 卡片/弹窗背景 |
| **Sidebar Light** | `#F3F4F6` | 浅色侧边栏 |
| **Sidebar Dark** | `#1F2937` | 深色侧边栏 |
| **Canvas** | `#FAFAFA` | 画布背景（带微网格） |

**文字色：**
| 层级 | 色值 | 用途 |
|------|------|------|
| **Text Primary** | `#111827` | 主要文字 |
| **Text Secondary** | `#6B7280` | 次要文字 |
| **Text Muted** | `#9CA3AF` | 占位符/禁用 |
| **Border** | `#E5E7EB` | 边框、分割线 |

### Typography System

**字体选择：**
```css
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 
             'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', 
             sans-serif;
```

**字体层级：**
| 层级 | 大小 | 行高 | 字重 | 用途 |
|------|------|------|------|------|
| **H1** | 24px | 1.3 | 600 | 页面标题 |
| **H2** | 20px | 1.35 | 600 | 区域标题 |
| **H3** | 16px | 1.4 | 600 | 卡片标题 |
| **Body** | 14px | 1.6 | 400 | 正文内容 |
| **Small** | 12px | 1.5 | 400 | 辅助文字、时间戳 |
| **Caption** | 11px | 1.4 | 400 | 标签、徽章 |

### Spacing & Layout Foundation

**基础间距单位：4px**

| Token | 值 | 用途 |
|-------|-----|------|
| `--space-1` | 4px | 紧凑间距 |
| `--space-2` | 8px | 相关元素间距 |
| `--space-3` | 12px | 组件内间距 |
| `--space-4` | 16px | 标准间距 |
| `--space-5` | 24px | 区块间距 |
| `--space-6` | 32px | 大区域间距 |

**布局规范：**
| 维度 | 值 |
|------|------|
| **侧边栏宽度** | 220px（可折叠至 64px） |
| **内容区最大宽度** | 1200px |
| **画布区** | 无限延展，支持缩放 |

**圆角：**
| Token | 值 | 用途 |
|-------|-----|------|
| `--radius-sm` | 6px | 小按钮、标签 |
| `--radius-md` | 8px | 卡片、输入框 |
| `--radius-lg` | 12px | 弹窗、大容器 |

**阴影：**
| Token | 值 | 用途 |
|-------|-----|------|
| `--shadow-sm` | `0 1px 2px rgba(0,0,0,0.05)` | 微弱层级 |
| `--shadow-md` | `0 1px 3px rgba(0,0,0,0.1)` | 卡片、下拉 |
| `--shadow-lg` | `0 4px 12px rgba(0,0,0,0.15)` | 弹窗、浮层 |

### Accessibility Considerations

| 维度 | 标准 |
|------|------|
| **对比度** | 主要文字 ≥ 4.5:1，大标题 ≥ 3:1 |
| **焦点状态** | 所有可交互元素有明显焦点环 |
| **字体大小** | 正文 ≥ 14px，可缩放 |
| **点击区域** | 最小 44x44px |
| **颜色不依赖** | 状态不仅靠颜色区分（+图标/文字） |

---

## Design Direction Decision

### Design Directions Explored

基于用户提供的 17 个 UI 设计稿，已有明确的设计方向：

| 界面类型 | 数量 | 涉及模块 |
|---------|------|----------|
| 登录注册 | 1 | 用户身份 |
| 仪表盘 | 1 | 概览展示 |
| 任务列表 | 4 | 今天/即将/个人/项目 |
| 画布编辑 | 1 | 自由画布 |
| 任务详情 | 2 | 侧边栏/新建 |
| 控件面板 | 1 | 工具箱 |
| 团队协作 | 5 | 分享设置 |
| 设置中心 | 2 | 系统设置 |

### Chosen Direction

**设计方向**：基于现有 UI 设计稿的视觉语言

**核心设计语言：**
| 维度 | 设计方向 |
|------|----------|
| **整体风格** | 现代扁平化，清爽专业 |
| **布局模式** | 侧边栏导航 + 内容主区域 |
| **卡片风格** | 白底圆角卡片，微阴影层级 |
| **色彩运用** | 蓝色主调，状态色辅助 |
| **信息密度** | 适中，留白充足 |

### Design Rationale

**选择理由：**
1. **一致性**：基于已有设计稿，确保开发与设计语言统一
2. **清晰度**：现代扁平风格减少视觉干扰，突出内容
3. **效率感**：简洁布局支持快速操作，符合效率工具定位
4. **可扩展**：组件化设计易于后续迭代

**设计理念：**
> 「简洁高效，专注内容」- 减少视觉干扰，突出想法和任务本身

### Implementation Approach

**界面组成：**
| 模块 | 设计要点 |
|------|----------|
| **侧边栏** | 固定宽度 220px，可折叠至 64px |
| **顶部** | 标签页切换（今天/即将/个人/项目） |
| **任务列表** | 卡片式展示，拖拽排序 |
| **画布编辑** | 无限缩放平移，节点自由拖拽 |
| **详情侧边栏** | 右侧滑出，编辑任务详情 |
| **设置中心** | 分组设置项，清晰分类 |

**关键视觉参数：**
- 主色：`#3B82F6` + 紫色辅助 `#8B5CF6`
- 卡片圆角：8px
- 按钮圆角：6px
- 卡片阴影：`0 1px 3px rgba(0,0,0,0.1)`
- 侧边栏宽度：220px
- 正文字号：14px
- 标题字号：24px

---

## User Journey Flows

### Journey 1: 小明 - 从点子到行动

```mermaid
flowchart TD
    A[💡 闪念产生] --> B[点击+ / ⌘+N]
    B --> C[输入想法内容]
    C --> D{想添加来源?}
    D -->|否| E[按回车保存]
    D -->|是| F[展开来源区域]
    F --> G{来源类型}
    G -->|链接| H[粘贴URL → 自动预览]
    G -->|图片| I[粘贴/拖拽/截图]
    G -->|文字| J[输入备注]
    H --> K[保存]
    I --> K
    J --> K
    E --> K
    K --> L[✓ 已保存提示]
    L --> M[想法出现在列表/画布]
    
    M --> N[...7天后...]
    N --> O[🔔 沉底提醒通知]
    O --> P[打开想法详情]
    P --> Q[看到记忆恢复卡片 + 来源预览]
    Q --> R{决定行动?}
    R -->|是| S[点击"转为任务"]
    S --> T[可选设置日期/分类]
    T --> U[🎉 任务已创建]
    U --> V[开始执行 → 标记完成]
    V --> W[🏆 成就感!]
```

### Journey 2: 小红 - 从碎片到体系

```mermaid
flowchart TD
    A[📝 会议中想到需求] --> B[快速记录想法]
    B --> C[补充"老板说转化率低"]
    
    D[🚇 通勤看到竞品] --> E[粘贴链接 → 自动预览]
    E --> F[拉线标注"借鉴点"]
    
    C --> G[画布上组织想法]
    F --> G
    G --> H[创建区域分组]
    H --> I[拖拽整理关系]
    
    I --> J{需要分享?}
    J -->|是| K[点击"分享"]
    K --> L[选择公开视图]
    L --> M[生成干净链接]
    M --> N[@设计师小王]
    N --> O[小王3分钟理解需求]
    O --> P[👍 "懂了!"]
```

### Journey 3: 小王 - 从被动到共创

```mermaid
flowchart TD
    A[📩 收到小红分享] --> B[点击链接]
    B --> C{已有账号?}
    C -->|是| D[直接查看]
    C -->|否| E[注册账号]
    E --> D
    
    D --> F[浏览画布内容]
    F --> G[查看链接预览、图片来源]
    G --> H[理解需求背景]
    
    H --> I[添加设计思路]
    I --> J[上传设计稿图片]
    J --> K[拉线标注"用Lottie性能更好"]
    
    K --> L[小红实时看到]
    L --> M[评审时演示画布]
    M --> N[方案一次通过]
```

### Source Input Enhancement

**来源类型支持：**

| 来源类型 | 输入方式 | 展示效果 |
|---------|---------|----------|
| **链接** | 粘贴 URL / 自动识别 | 卡片预览（标题+缩略图+域名） |
| **图片** | 粘贴/上传/截图 | 缩略图预览 |
| **截图** | ⌘+Shift+4 快捷截图 | 自动附加到想法 |
| **文件** | 拖拽/上传 | 文件图标+文件名 |
| **文字备注** | 手动输入 | 灰色辅助文字 |
| **录音** | 点击录音按钮 | 语音波形+时长（V2.0） |

**链接自动预览：**
- 粘贴 URL 后自动获取 Open Graph 信息
- 展示标题、缩略图、域名
- 支持点击打开原链接

### Journey Patterns

**入口模式：**
| 场景 | 入口 | 快捷键 |
|------|------|--------|
| 快速记想法 | "+" 按钮 / 全局快捷键 | ⌘+N |
| 搜索内容 | 搜索图标 | ⌘+K |
| 切换视图 | 顶部标签页 | ⌘+1~4 |

**反馈模式：**
| 操作 | 反馈 |
|------|------|
| 保存成功 | "已保存 ✓" 提示（1.5s 消失） |
| 创建任务 | "任务已创建 🎉" + 轻微动效 |
| 完成任务 | 勾选动画 + 进度更新 |
| 发生错误 | 红色提示 + 重试按钮 |

**导航模式：**
| 操作 | 交互 |
|------|------|
| 展开详情 | 点击卡片 → 右侧滑出详情面板 |
| 进入画布 | 点击画布入口 → 全屏画布模式 |
| 返回列表 | 面包屑 / 左上角返回 |

### Flow Optimization Principles

1. **最少步骤到价值**：闪念捕捉 ≤3步，想法→任务 ≤2步
2. **渐进披露**：默认极简，高级选项折叠
3. **即时反馈**：每个操作都有视觉/状态反馈
4. **容错设计**：所有操作可撤销，自动保存
5. **上下文保留**：链接自动预览，图片缩略图展示

---

## Component Strategy

### Design System Components

**Arco Design 可用组件：**
| 类型 | 组件 |
|------|------|
| **通用** | Button, Icon, Typography |
| **布局** | Layout, Grid, Space, Divider |
| **导航** | Menu, Tabs, Breadcrumb, Dropdown |
| **数据输入** | Input, Select, DatePicker, Checkbox |
| **数据展示** | Card, Avatar, Tag, Badge, List |
| **反馈** | Modal, Notification, Message, Tooltip |

### Custom Components

#### IdeaCard（想法卡片）

**用途**：展示想法内容、来源、时间
**状态**：default / hover / selected / dragging
**内容：**
- 想法标题/内容摘要（50字截断）
- 时间戳
- 来源预览（链接/图片）
- 操作按钮（转任务/更多）

#### SourcePreview（来源预览）

**用途**：展示链接/图片/文件来源
**变体**：link / image / file / text
**状态**：loading / loaded / error
**展示：**
- link: 缩略图 + 标题 + 域名
- image: 缩略图（点击放大）
- file: 图标 + 文件名 + 大小

#### MemoryRecoveryCard（记忆恢复卡片）

**用途**：回顾旧想法时突出展示上下文
**触发**：打开 7天+ 未操作的想法
**内容：**
- 时间提示（"2周前"）
- 来源备注
- 参考链接
- 反馈按钮（"这个想法帮到你了吗?"）

#### CanvasNode（画布节点）

**用途**：画布上的可拖拽节点
**类型**：idea / task / region
**交互**：拖拽移动 / 双击编辑 / 右键菜单 / 边缘拉出连线

#### ConnectionLine（连线标注）

**用途**：画布上节点间的连线
**类型**：直线 / 曲线
**功能**：可添加文字标注

#### QuickCapture（闪念捕捉）

**用途**：快速记录想法的极简输入框
**状态**：collapsed / expanded
**触发**："+" 按钮 / ⌘+N 快捷键
**功能**：展开后可添加来源（可选）

### Component Implementation Strategy

**实现原则：**
1. 使用 Arco Design 作为基础组件
2. 自定义组件使用设计 Token 保持一致性
3. 画布组件基于 Konva.js 独立实现
4. 所有组件遵循无障碍最佳实践

### Implementation Roadmap

**Phase 1 - 核心组件（Week 1-2）：**
- QuickCapture（闪念捕捉）
- IdeaCard（想法卡片）
- TaskCard（任务卡片）
- SourcePreview（来源预览）

**Phase 2 - 画布组件（Week 3-4）：**
- CanvasNode（画布节点）
- ConnectionLine（连线标注）
- Region（区域分组）

**Phase 3 - 增强组件（Week 5-6）：**
- MemoryRecoveryCard（记忆恢复）
- StatusBadge（状态徽章）
- ProgressRing（进度圆环）

---

## UX Consistency Patterns

### Button Hierarchy

| 层级 | 样式 | 用途 | 示例 |
|------|------|------|------|
| **Primary** | 填充主色 | 主要行动 | [创建任务]、[保存] |
| **Secondary** | 描边主色 | 次要行动 | [取消]、[稍后] |
| **Text** | 纯文字 | 低优先级操作 | [了解更多]、[跳过] |
| **Danger** | 填充红色 | 破坏性操作 | [删除]、[清空] |
| **Icon** | 仅图标 | 工具栏操作 | [⚙️]、[⋮] |

**按钮规则：**
- 一个视图中最多 1 个 Primary 按钮
- 破坏性操作需二次确认
- 禁用态降低透明度 + cursor: not-allowed

### Feedback Patterns

| 类型 | 样式 | 持续时间 | 示例 |
|------|------|---------|------|
| **Success** | 绿色 Toast | 1.5s 自动消失 | "已保存 ✓" |
| **Info** | 蓝色 Toast | 2s 自动消失 | "已复制链接" |
| **Warning** | 橙色 Alert | 需手动关闭 | "链接即将过期" |
| **Error** | 红色 Alert | 需手动关闭 | "保存失败，请重试" |
| **Celebration** | 动效 | 1.5s | 🎉 任务完成庆祝 |

**反馈规则：**
- 成功反馈轻量、不打扰
- 错误反馈需给出解决方案（重试/联系支持）
- 重要操作有微动效反馈

### Form Patterns

| 场景 | 验证时机 | 错误展示 |
|------|---------|----------|
| **必填项** | blur 时 | 红框 + 下方提示文字 |
| **格式校验** | 输入时 | 红框 + 实时提示 |
| **提交验证** | 点击保存 | 滚动到第一个错误 |
| **长表单** | 分步引导 | 步骤指示器 |

**表单规则：**
- 标签在上方（非左侧）
- 可选字段标注"（可选）"
- 保存按钮固定在底部
- 自动保存草稿（30s 间隔）

### Navigation Patterns

| 场景 | 模式 | 示例 |
|------|------|------|
| **主导航** | 侧边栏固定 | 首页/今天/即将到来/画布 |
| **二级导航** | 顶部标签页 | 今天/即将/个人/项目 |
| **层级导航** | 面包屑 | 画布 > 区域A > 想法详情 |
| **详情展开** | 右侧滑出面板 | 任务详情侧边栏 |
| **全屏模式** | 覆盖式 | 画布编辑全屏 |

**导航规则：**
- 当前位置始终可见
- 返回操作显眼（左上角 / 面包屑）
- 深层级用面包屑，浅层级用返回箭头

### Empty States

| 场景 | 展示内容 | CTA |
|------|---------|-----|
| **首次使用** | 引导插图 + 说明 | [创建第一个想法] |
| **无搜索结果** | "未找到相关内容" | [清除筛选] |
| **列表为空** | 图标 + 提示 | [添加任务] |
| **画布为空** | 中心引导 | [添加第一个想法] |

### Loading States

| 场景 | 样式 | 说明 |
|------|------|------|
| **全页加载** | 品牌 Logo 动画 | 首屏加载 |
| **区域加载** | Skeleton 骨架屏 | 列表/卡片加载 |
| **按钮加载** | 按钮内 Spinner | 提交中 |
| **后台保存** | 微型 ✓ 提示 | 自动保存 |

**加载规则：**
- ≤300ms 不显示加载状态
- 骨架屏模拟真实布局
- 按钮加载时禁用防重复提交

### Search & Filter Patterns

| 功能 | 触发 | 行为 |
|------|------|------|
| **全局搜索** | ⌘+K | 弹出搜索面板，实时搜索 |
| **列表筛选** | 顶部筛选栏 | 即时筛选，可清除 |
| **排序** | 下拉选择 | 时间/优先级/创建顺序 |
| **标签筛选** | 点击标签 | 高亮并筛选 |

---

## Responsive Design & Accessibility

### Responsive Strategy

| 设备类型 | 布局策略 | 功能范围 |
|---------|---------|----------|
| **Desktop (1024px+)** | 侧边栏 + 内容主区 + 详情面板 | 完整功能 |
| **Tablet (768-1023px)** | 可折叠侧边栏 + 内容主区 | 核心功能（无画布编辑） |
| **Mobile (< 768px)** | 底部导航 + 单列内容 | 只读浏览 + 闪念捕捉 |

**Desktop 策略：**
- 侧边栏固定 220px
- 支持多面板同时展示
- 画布全功能编辑
- 键盘快捷键完整支持

**Tablet 策略：**
- 侧边栏默认折叠
- 触控友好（更大点击区域）
- 画布可浏览但不可编辑（MVP）

**Mobile 策略：**
- 底部导航栏
- 纵向卡片列表
- 闪念快速捕捉入口

### Breakpoint Strategy

| 断点 | 范围 | 触发行为 |
|------|------|----------|
| **xs** | < 576px | 底部导航，单列 |
| **sm** | 576-767px | 底部导航，单列 |
| **md** | 768-1023px | 折叠侧边栏，可展开 |
| **lg** | 1024-1279px | 侧边栏固定，双列 |
| **xl** | ≥1280px | 完整三栏布局 |

### Accessibility Strategy

**目标级别：WCAG 2.1 Level AA**

| 维度 | 标准 | 实现方式 |
|------|------|----------|
| **对比度** | 正常文字 ≥4.5:1，大文字 ≥3:1 | 设计 Token 预置 |
| **焦点指示** | 所有可交互元素 | 2px 主色焦点环 |
| **键盘导航** | 全功能可达 | Tab 顺序 + 快捷键 |
| **屏幕阅读器** | 语义化 HTML | ARIA 标签 |
| **点击区域** | 最小 44x44px | 组件规范 |
| **动效减弱** | prefers-reduced-motion 支持 | CSS 媒体查询 |

### Testing Strategy

**响应式测试：**
| 测试类型 | 工具/方法 |
|---------|----------|
| 设备模拟 | Chrome DevTools |
| 真机测试 | iPhone 15, iPad Pro, Android |
| 浏览器兼容 | Chrome, Safari, Firefox |

**无障碍测试：**
| 测试类型 | 工具/方法 |
|---------|----------|
| 自动检测 | axe-core, Lighthouse |
| 屏幕阅读器 | VoiceOver (Mac), NVDA (Win) |
| 键盘导航 | 纯键盘操作测试 |
| 色盲模拟 | Chrome DevTools |

### Implementation Guidelines

**响应式开发：**
- Mobile-first 设计理念
- 使用相对单位（rem, %, vw）
- TailwindCSS 响应式断点类
- 图片响应式加载

**无障碍开发：**
- 语义化 HTML（`<header>`, `<main>`, `<nav>`, `<button>`）
- 表单元素关联 `<label>`
- 图片必须有 `alt` 属性
- 焦点顺序遵循视觉顺序
- 可操作元素支持 Enter/Space 触发

---

## Tech Stack

### Frontend

| 技术 | 用途 |
|------|------|
| **React 18** | UI 框架 |
| **TypeScript** | 类型安全 |
| **TailwindCSS** | 样式系统 |
| **Jotai** | 状态管理（原子化） |
| **Vite** | 构建工具 |
| **React Router** | 路由（哈希模式） |
| **Konva.js** | 画布渲染 |

### Backend

| 技术 | 用途 |
|------|------|
| **NestJS** | 服务端框架 |
| **TypeScript** | 类型安全 |
| **RESTful API** | 接口风格 |

### Development Tools

| 工具 | 用途 |
|------|------|
| **ESLint** | 代码检查 |
| **Prettier** | 代码格式化 |
| **Vitest** | 单元测试 |
| **Playwright** | E2E 测试 |
