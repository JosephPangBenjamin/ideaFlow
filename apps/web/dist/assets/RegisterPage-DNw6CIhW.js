import{r as c,j as e,L as j}from"./index-AlMa9zhO.js";import{F as i,u as w,T as y,I as o,a as b,b as x,B as C}from"./useAuth-CXyDrBNh.js";import{M as n,C as I}from"./index-CcbGEtC5.js";const a=i.Item,{Title:N,Text:p}=y,F=/^(?=.*[a-zA-Z])(?=.*\d).{8,}$/;function q(){const[l]=i.useForm(),[u,d]=c.useState(!1),{register:m}=w(),g=c.useCallback(async s=>{var r,t;if(s.password!==s.confirmPassword){n.error("两次输入的密码不一致");return}d(!0);try{await m(s.username,s.password),n.success("注册成功！")}catch(h){const f=((t=(r=h.response)==null?void 0:r.data)==null?void 0:t.message)||"注册失败，请重试";n.error(f)}finally{d(!1)}},[m]);return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50",children:e.jsxs(I,{className:"w-full max-w-md p-8 shadow-xl",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(N,{heading:2,className:"text-gray-800",children:"创建账号"}),e.jsx(p,{type:"secondary",children:"开始使用 IdeaFlow 记录你的想法"})]}),e.jsxs(i,{form:l,layout:"vertical",autoComplete:"off",onSubmit:g,children:[e.jsx(a,{label:"用户名",field:"username",rules:[{required:!0,message:"请输入用户名"},{minLength:3,message:"用户名至少3个字符"},{maxLength:20,message:"用户名最多20个字符"}],children:e.jsx(o,{prefix:e.jsx(b,{}),placeholder:"3-20个字符",size:"large"})}),e.jsx(a,{label:"密码",field:"password",rules:[{required:!0,message:"请输入密码"},{validator:(s,r)=>{s&&s.length<8?r("密码至少8位"):s&&!F.test(s)?r("密码需包含字母和数字"):r()}}],children:e.jsx(o.Password,{prefix:e.jsx(x,{}),placeholder:"至少8位，包含字母和数字",size:"large"})}),e.jsx(a,{label:"确认密码",field:"confirmPassword",rules:[{required:!0,message:"请确认密码"},{validator:(s,r)=>{const t=l.getFieldValue("password");s&&s!==t?r("两次输入的密码不一致"):r()}}],children:e.jsx(o.Password,{prefix:e.jsx(x,{}),placeholder:"再次输入密码",size:"large"})}),e.jsx(a,{children:e.jsx(C,{type:"primary",htmlType:"submit",long:!0,size:"large",loading:u,className:"mt-2",children:"注册"})})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs(p,{type:"secondary",children:["已有账号？"," ",e.jsx(j,{to:"/login",className:"text-blue-600 hover:text-blue-800",children:"立即登录"})]})})]})})}export{q as RegisterPage,q as default};
